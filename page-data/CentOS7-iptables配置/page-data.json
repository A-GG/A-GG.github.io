{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/CentOS7-iptables配置/","result":{"data":{"site":{"siteMetadata":{"title":"AGG","postCopyright":true,"siteUrl":"https://agg.me","author":{"name":"AGG"}}},"mdx":{"id":"a548f92d-c49f-5228-9813-ff0de7cac5b3","excerpt":"CentOS7使用的防火墙默认为firewalle,本篇文章主要讲述如何在CentOS7中安装和使用iptables防火墙。 安装iptable iptable-service 禁用/停止自带的firewalld服务 设置现有规则 其他规则设定 保存规则设定 开启iptables服务  解决vsftpd…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"CentOS7 iptables配置\",\n  \"date\": \"2016-09-18T17:49:39.284Z\",\n  \"tags\": [\"CentOS\"],\n  \"categories\": [\"CentOS\"],\n  \"description\": \"CentOS7使用的防火墙默认为firewalle,本篇文章主要讲述如何在CentOS7中安装和使用iptables防火墙。\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"CentOS7\\u4F7F\\u7528\\u7684\\u9632\\u706B\\u5899\\u9ED8\\u8BA4\\u4E3Afirewalle,\\u672C\\u7BC7\\u6587\\u7AE0\\u4E3B\\u8981\\u8BB2\\u8FF0\\u5982\\u4F55\\u5728CentOS7\\u4E2D\\u5B89\\u88C5\\u548C\\u4F7F\\u7528iptables\\u9632\\u706B\\u5899\\u3002\"), mdx(\"p\", null, \"\\u5B89\\u88C5iptable iptable-service\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u5148\\u68C0\\u67E5\\u662F\\u5426\\u5B89\\u88C5\\u4E86iptables\\nservice iptables status\\n#\\u5B89\\u88C5iptables\\nyum install -y iptables\\n#\\u5347\\u7EA7iptables\\nyum update iptables \\n#\\u5B89\\u88C5iptables-services\\nyum install iptables-services\"), \"\\n        \"), mdx(\"p\", null, \"\\u7981\\u7528/\\u505C\\u6B62\\u81EA\\u5E26\\u7684firewalld\\u670D\\u52A1\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u505C\\u6B62firewalld\\u670D\\u52A1\\nsystemctl stop firewalld\\n#\\u7981\\u7528firewalld\\u670D\\u52A1\\nsystemctl mask firewalld\"), \"\\n        \"), mdx(\"p\", null, \"\\u8BBE\\u7F6E\\u73B0\\u6709\\u89C4\\u5219\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u67E5\\u770Biptables\\u73B0\\u6709\\u89C4\\u5219\\niptables -L -n\\n#\\u5148\\u5141\\u8BB8\\u6240\\u6709,\\u4E0D\\u7136\\u6709\\u53EF\\u80FD\\u4F1A\\u676F\\u5177\\niptables -P INPUT ACCEPT\\n#\\u6E05\\u7A7A\\u6240\\u6709\\u9ED8\\u8BA4\\u89C4\\u5219\\niptables -F\\n#\\u6E05\\u7A7A\\u6240\\u6709\\u81EA\\u5B9A\\u4E49\\u89C4\\u5219\\niptables -X\\n#\\u6240\\u6709\\u8BA1\\u6570\\u5668\\u5F520\\niptables -Z\\n#\\u5141\\u8BB8\\u6765\\u81EA\\u4E8Elo\\u63A5\\u53E3\\u7684\\u6570\\u636E\\u5305(\\u672C\\u5730\\u8BBF\\u95EE)\\niptables -A INPUT -i lo -j ACCEPT\\n#\\u5F00\\u653E22\\u7AEF\\u53E3\\niptables -A INPUT -p tcp --dport 22 -j ACCEPT\\n#\\u5F00\\u653E21\\u7AEF\\u53E3(FTP)\\niptables -A INPUT -p tcp --dport 21 -j ACCEPT\\n#\\u5F00\\u653E80\\u7AEF\\u53E3(HTTP)\\niptables -A INPUT -p tcp --dport 80 -j ACCEPT\\n#\\u5F00\\u653E443\\u7AEF\\u53E3(HTTPS)\\niptables -A INPUT -p tcp --dport 443 -j ACCEPT\\n#\\u5141\\u8BB8ping\\niptables -A INPUT -p icmp --icmp-type 8 -j ACCEPT\\n#\\u5141\\u8BB8\\u63A5\\u53D7\\u672C\\u673A\\u8BF7\\u6C42\\u4E4B\\u540E\\u7684\\u8FD4\\u56DE\\u6570\\u636E RELATED,\\u662F\\u4E3AFTP\\u8BBE\\u7F6E\\u7684\\niptables -A INPUT -m state --state  RELATED,ESTABLISHED -j ACCEPT\\n#\\u5176\\u4ED6\\u5165\\u7AD9\\u4E00\\u5F8B\\u4E22\\u5F03\\niptables -P INPUT DROP\\n#\\u6240\\u6709\\u51FA\\u7AD9\\u4E00\\u5F8B\\u7EFF\\u706F\\niptables -P OUTPUT ACCEPT\\n#\\u6240\\u6709\\u8F6C\\u53D1\\u4E00\\u5F8B\\u4E22\\u5F03\\niptables -P FORWARD DROP\"), \"\\n        \"), mdx(\"p\", null, \"\\u5176\\u4ED6\\u89C4\\u5219\\u8BBE\\u5B9A\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u5982\\u679C\\u8981\\u6DFB\\u52A0\\u5185\\u7F51ip\\u4FE1\\u4EFB\\uFF08\\u63A5\\u53D7\\u5176\\u6240\\u6709TCP\\u8BF7\\u6C42\\uFF09\\niptables -A INPUT -p tcp -s 45.96.174.68 -j ACCEPT\\n#\\u8FC7\\u6EE4\\u6240\\u6709\\u975E\\u4EE5\\u4E0A\\u89C4\\u5219\\u7684\\u8BF7\\u6C42\\niptables -P INPUT DROP\\n#\\u8981\\u5C01\\u505C\\u4E00\\u4E2AIP\\uFF0C\\u4F7F\\u7528\\u4E0B\\u9762\\u8FD9\\u6761\\u547D\\u4EE4\\uFF1A\\niptables -I INPUT -s ***.***.***.*** -j DROP\\n#\\u8981\\u89E3\\u5C01\\u4E00\\u4E2AIP\\uFF0C\\u4F7F\\u7528\\u4E0B\\u9762\\u8FD9\\u6761\\u547D\\u4EE4:\\niptables -D INPUT -s ***.***.***.*** -j DROP\"), \"\\n        \"), mdx(\"p\", null, \"\\u4FDD\\u5B58\\u89C4\\u5219\\u8BBE\\u5B9A\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u4FDD\\u5B58\\u4E0A\\u8FF0\\u89C4\\u5219\\nservice iptables save\"), \"\\n        \"), mdx(\"p\", null, \"\\u5F00\\u542Fiptables\\u670D\\u52A1 \"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u6CE8\\u518Ciptables\\u670D\\u52A1\\n#\\u76F8\\u5F53\\u4E8E\\u4EE5\\u524D\\u7684chkconfig iptables on\\nsystemctl enable iptables.service\\n#\\u5F00\\u542F\\u670D\\u52A1\\nsystemctl start iptables.service\\n#\\u67E5\\u770B\\u72B6\\u6001\\nsystemctl status iptables.service\"), \"\\n        \"), mdx(\"p\", null, \"\\u89E3\\u51B3vsftpd\\u5728iptables\\u5F00\\u542F\\u540E,\\u65E0\\u6CD5\\u4F7F\\u7528\\u88AB\\u52A8\\u6A21\\u5F0F\\u7684\\u95EE\\u9898\"), mdx(\"p\", null, \"1.\\u9996\\u5148\\u5728/etc/sysconfig/iptables-config\\u4E2D\\u4FEE\\u6539\\u6216\\u8005\\u6DFB\\u52A0\\u4EE5\\u4E0B\\u5185\\u5BB9\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u6DFB\\u52A0\\u4EE5\\u4E0B\\u5185\\u5BB9,\\u6CE8\\u610F\\u987A\\u5E8F\\u4E0D\\u80FD\\u8C03\\u6362\\nIPTABLES_MODULES=\\\"ip_conntrack_ftp\\\"\\nIPTABLES_MODULES=\\\"ip_nat_ftp\\\"\"), \"\\n        \"), mdx(\"p\", null, \"2.\\u91CD\\u65B0\\u8BBE\\u7F6Eiptables\\u8BBE\\u7F6E\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"iptables -A INPUT -m state --state  RELATED,ESTABLISHED -j ACCEPT\"), \"\\n        \"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4EE5\\u4E0B\\u4E3A\\u5B8C\\u6574\\u8BBE\\u7F6E\\u811A\\u672C\")), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#!/bin/sh\\niptables -P INPUT ACCEPT\\niptables -F\\niptables -X\\niptables -Z\\niptables -A INPUT -i lo -j ACCEPT\\niptables -A INPUT -p tcp --dport 22 -j ACCEPT\\niptables -A INPUT -p tcp --dport 21 -j ACCEPT\\niptables -A INPUT -p tcp --dport 80 -j ACCEPT\\niptables -A INPUT -p tcp --dport 443 -j ACCEPT\\niptables -A INPUT -p icmp --icmp-type 8 -j ACCEPT\\niptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\\niptables -P INPUT DROP\\niptables -P OUTPUT ACCEPT\\niptables -P FORWARD DROP\\nservice iptables save\\nsystemctl restart iptables.service\"), \"\\n        \"), mdx(\"p\", null, \"##\\u5982\\u4F55\\u5220\\u9664\\u5355\\u6761\\u89C4\\u5219\\uFF1F\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u5148\\u4F7F\\u7528\\u884C\\u53F7\\u663E\\u793A\\u6240\\u6709\\u89C4\\u5219\\niptables -t nat -L -n --line-numbers\\n#\\u627E\\u5230\\u8981\\u5220\\u9664\\u7684\\u89C4\\u5219\\uFF0C\\u786E\\u8BA4\\u524D\\u9762\\u7684\\u884C\\u53F7\\uFF0C\\u4F7F\\u7528\\u4E0B\\u9762\\u7684\\u547D\\u4EE4\\u8FDB\\u884C\\u5220\\u9664\\niptables -t nat -D PREROUTING \\u884C\\u53F7\"), \"\\n        \"), mdx(\"p\", null, \"##\\u5982\\u4F55\\u5220\\u9664\\u591A\\u6761\\u89C4\\u5219\\uFF1F\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"bash\",\n    \"terminal\": \"carbon\",\n    \"theme\": \"base16-light\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"#\\u5C06\\u6240\\u6709\\u7684iptables\\u89C4\\u5219\\u5BFC\\u51FA\\u5230iptableRules\\u6587\\u4EF6\\niptables-save > iptablesRules\\n#\\u6253\\u5F00\\u8BE5\\u6587\\u4EF6\\uFF0C\\u5C06\\u4F60\\u4E0D\\u60F3\\u8981\\u7684\\u6240\\u6709\\u89C4\\u5219\\u90FD\\u5220\\u6389\\uFF0C\\u6539\\u5B8C\\u8BB0\\u5F97\\u4FDD\\u5B58\\n#\\u4FDD\\u5B58\\u5B8C\\u4E4B\\u540E\\u4F7F\\u7528\\u8BE5\\u6587\\u4EF6\\u91CD\\u65B0\\u914D\\u7F6Eiptables\\niptables-restore < iptablesRules\"), \"\\n        \"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/CentOS7-iptables配置/"},"frontmatter":{"title":"CentOS7 iptables配置","date":"September 18, 2016","description":"CentOS7使用的防火墙默认为firewalle,本篇文章主要讲述如何在CentOS7中安装和使用iptables防火墙。","categories":["CentOS"],"tags":["CentOS"],"toc":null}}},"pageContext":{"slug":"/CentOS7-iptables配置/","previous":{"fields":{"slug":"/Block机制详解/"},"frontmatter":{"title":"Block机制详解"}},"next":{"fields":{"slug":"/JavaScript预解析/"},"frontmatter":{"title":"JavaScript预解析"}}}},"staticQueryHashes":["2786614800","2841359383","3828236571"]}